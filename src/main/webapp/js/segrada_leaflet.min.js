!function(l){let s;function e(t){t=t||l("body"),l(".sg-geotab",t).on("shown.bs.tab",function(t){const e=l(t.target);if("1"!=e.attr("data-created")){e.attr("data-created","1");var a=e.attr("data-locations-id"),n=l("#"+a);const o=l(".sg-map-form",n),i=l(".sg-geocomplete",o);console.log(s.provider),console.log(s.lat);t=L.map(a+"-map").setView([s.lat||0,s.lng||0],s.zoom||2);L.tileLayer.provider(s.provider||"Stamen.TerrainBackground",s.options||{}).addTo(t),l(".sg-map-add-marker",n).click(function(t){l(this).parent().hide(),o.show(),t.preventDefault()}),i.typeahead({hint:!0,highlight:!0,minLength:2},{name:"address-suggest-"+a,displayKey:"title",limit:100,valueKey:"id",source:function(t,e,n){l.ajax({url:"http://nominatim.openstreetmap.org/search?format=json&q="+encodeURIComponent(t)}).done(function(e){const a=[];for(let t=0;t<e.length;t++)a.push({title:e[t].display_name,lng:e[t].lon,lat:e[t].lat});n(a)})},async:!0}).bind("typeahead:selected",function(t,e){i.val(e.title),l("input[name=lat]",o).val(e.lat),l("input[name=lng]",o).val(e.lng),l("input[type=submit]",o).show()}).bind("keyup",function(){this.value||(i.val(""),l("input[name=lat]",o).val(""),l("input[name=lng]",o).val(""),l("input[type=submit]",o).hide())}),console.log(n)}})}l(document).ready(function(){var t=l("#sg-map-settings").html();t&&(s=JSON.parse(t),s&&afterAjaxHooks.push(e))})}(jQuery);
